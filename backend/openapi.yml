openapi: 3.0.2
info:
  title: OPRE OPS API
  description: OPRE OPS API Specification
  version: 0.1.1
servers:
  - url: https://localhost:8080
    description: Localhost
  - url: https://ops-backend.app.cloud.gov
    description: Development Server (Live)
  - url: https://ops-api-staging.app.cloud.gov
    description: Staging Server (Live)
paths:
  /api/v1/agreements/:
    get:
      description: Get Agreements
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: project_id
          in: query
          schema:
            type: integer
          example: 1
        - name: search
          in: query
          schema:
            type: string
          example: contract
        - name: filter_params
          in: query
          schema:
            type: object
            additionalProperties: true
          description: >-
            Any property from agreements can be used to filter the agreements
            that are returned. For example `agreement_type=CONTRACT` would
            return only contracts.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreements'
              examples:
                '0':
                  $ref: '#/components/examples/Agreements'
    post:
      summary: Create a new Agreement
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Agreements'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error
  /api/v1/agreements/{agreement_id}:
    get:
      description: Get Agreement By Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: agreement_id
          description: Agreement Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreement'
              examples:
                '0':
                  $ref: '#/components/examples/Agreement'
    put:
      summary: Update an Agreement (Over-write)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: agreement_id
          description: Agreement Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Agreement'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    patch:
      summary: Update an Agreement (Merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: agreement_id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    delete:
      summary: Delete an Agreement
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: agreement_id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/agreements/{agreement_id}/history:
    get:
      description: Get Agreement History By Id
      parameters:
        - in: path
          name: agreement_id
          description: Agreement Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreement'
              examples:
                '0':
                  $ref: '#/components/examples/Agreement'
  /api/v1/cans/:
    get:
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      description: Get CANs
      responses:
        '200':
          description: OK
  /api/v1/cans/{can_id}:
    get:
      description: Get CAN by Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: can_id
          description: CAN Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CAN'
              example:
                '0':
                  $ref: '#/components/examples/CAN'
  /api/v1/portfolios:
    get:
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      description: Get Portfolios
      responses:
        '200':
          description: OK
  /api/v1/portfolios/{portfolio_id}:
    get:
      description: Get Portfolio by Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: portfolio_id
          description: portfolio Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Portfolio'
              examples:
                '0':
                  $ref: '#/components/examples/Portfolio'
  /api/v1/portfolios/{portfolio_id}/calcFunding/:
    get:
      description: Get Total Funding by Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: portfolio_id
          description: portfolio Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
        - name: fiscal_year
          in: query
          schema:
            type: string
          example: '2023'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  planned_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
                  obligated_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
                  available_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
                  total_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
                  in_execution_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
                  carry_forward_funding:
                    type: object
                    properties:
                      amount:
                        type: number
                      percent:
                        type: string
              examples:
                '0':
                  value: |
                    {
                      "available_funding": {
                        "amount": 12000000.0,
                        "percent": "60.0"
                      },
                      "carry_forward_funding": {
                        "amount": 0.0,
                        "percent": "Carry Over"
                      },
                      "in_execution_funding": {
                        "amount": 4000000.0,
                        "percent": "20.0"
                      },
                      "obligated_funding": {
                        "amount": 3000000.0,
                        "percent": "15.0"
                      },
                      "planned_funding": {
                        "amount": 1000000.0,
                        "percent": "5.0"
                      },
                      "total_funding": {
                        "amount": 20000000.0,
                        "percent": "Total"
                      }
                    }
  /api/v1/portfolios/{portfolio_id}/cans/:
    get:
      description: Get CANs associated with a Portfolio
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: year
          in: query
          schema:
            type: string
          example: '2023'
        - in: path
          name: portfolio_id
          description: portfolio Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                properties: {}
                items:
                  type: string
              examples:
                '0':
                  value: |
                    [
                      {
                        "appropriation_date": "01/10/2023",
                        "appropriation_term": 1,
                        "arrangement_type_id": 3,
                        "authorizer_id": 26,
                        "description": "Incoming Interagency Agreements",
                        "expiration_date": "01/09/2024",
                        "id": 2,
                        "managing_portfolio_id": 1,
                        "managing_project_id": null,
                        "nickname": "IAA-Incoming",
                        "number": "G99IA14",
                        "purpose": ""
                      },
                      {
                        "appropriation_date": "01/10/2022",
                        "appropriation_term": 1,
                        "arrangement_type_id": 4,
                        "authorizer_id": 26,
                        "description": "Child Development Research Fellowship Grant Program",
                        "expiration_date": "01/09/2023",
                        "id": 4,
                        "managing_portfolio_id": 1,
                        "managing_project_id": 1,
                        "nickname": "ASPE SRCD-IDDA",
                        "number": "G990136",
                        "purpose": ""
                      }
                    ]
  /api/v1/can-funding-summary/{can_id}:
    get:
      description: Get Funding Totals by CAN Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: fiscal_year
          in: query
          schema:
            type: string
          example: '2023'
        - in: path
          name: can_id
          description: CAN Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  can:
                    type: object
                    properties:
                      appropriation_term:
                        type: integer
                      authorizer_id:
                        type: integer
                      arrangement_type_id:
                        type: integer
                      number:
                        type: string
                      purpose:
                        type: string
                      managing_portfolio_id:
                        type: integer
                      nickname:
                        type: string
                      appropriation_date:
                        type: string
                      description:
                        type: string
                      id:
                        type: integer
                      expiration_date:
                        type: string
                      managing_project_id:
                        type: integer
                  received_funding:
                    type: string
                  planned_funding:
                    type: integer
                  obligated_funding:
                    type: integer
                  available_funding:
                    type: string
                  total_funding:
                    type: string
                  expiration_date:
                    type: string
                  in_execution_funding:
                    type: string
                  carry_forward_funding:
                    type: integer
                  carry_forward_label:
                    type: string
                  expected_funding:
                    type: string
              examples:
                '0':
                  value: |
                    {
                      "available_funding": "8000000.00",
                      "can": {
                        "appropriation_date": "01/10/2022",
                        "appropriation_term": 1,
                        "arrangement_type_id": 4,
                        "authorizer_id": 26,
                        "description": "Child Development Research Fellowship Grant Program",
                        "expiration_date": "01/09/2023",
                        "id": 4,
                        "managing_portfolio_id": 1,
                        "managing_project_id": 1,
                        "nickname": "ASPE SRCD-IDDA",
                        "number": "G990136",
                        "purpose": ""
                      },
                      "carry_forward_funding": 0,
                      "carry_forward_label": "Carry-Forward",
                      "received_funding": "6000000.00",
                      "expected_funding": "4000000.00",
                      "expiration_date": "09/01/2023",
                      "in_execution_funding": "2000000.00",
                      "obligated_funding": 0,
                      "planned_funding": 0,
                      "total_funding": "10000000.00"
                    }
  /api/v1/users/:
    get:
      description: Get all Users
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: oidc_id
          in: query
          schema:
            type: string
          example: e5711101-bc3e-41e5-a6a2-051874b307ca
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  division:
                    type: integer
                  oidc_id:
                    type: string
                  full_name:
                    type: string
                  role:
                    type: string
                  last_name:
                    type: string
                  date_joined:
                    type: string
                  id:
                    type: integer
                  first_name:
                    type: string
                  updated: {}
                  email:
                    type: string
              examples:
                '0':
                  value: |
                    {
                      "date_joined": "2023-04-06T20:33:38.292475",
                      "division": 3,
                      "email": "tdonaworth+dev@flexion.us",
                      "first_name": "Tim",
                      "full_name": "(no name) (no name)",
                      "id": 5,
                      "last_name": "Donaworth",
                      "oidc_id": "e5711101-bc3e-41e5-a6a2-051874b307ca",
                      "role": "Tech Lead",
                      "updated": null
                    }
                '1':
                  value: |
                    [
                      {
                        "date_joined": "2023-04-06T20:33:38.292475",
                        "division": 1,
                        "email": "emily.ball@example.com",
                        "first_name": "Emily",
                        "full_name": "(no name) (no name)",
                        "id": 1,
                        "last_name": "Ball",
                        "oidc_id": "00000000-0000-1111-a111-000000000001",
                        "role": "COR",
                        "updated": null
                      },
                      {
                        "date_joined": "2023-04-06T20:33:38.292475",
                        "division": 4,
                        "email": "Bethanne.Barnes@example.com",
                        "first_name": "Bethanne",
                        "full_name": "(no name) (no name)",
                        "id": 2,
                        "last_name": "Barnes",
                        "oidc_id": "00000000-0000-1111-a111-000000000002",
                        "role": "Division Director",
                        "updated": null
                      },
                      {
                        "date_joined": "2023-04-06T20:33:38.292475",
                        "division": 1,
                        "email": "Meryl.Barofsky@example.com",
                        "first_name": "Meryl",
                        "full_name": "(no name) (no name)",
                        "id": 3,
                        "last_name": "Barofsky",
                        "oidc_id": "00000000-0000-1111-a111-000000000003",
                        "role": "COR",
                        "updated": null
                      },
                      {
                        "date_joined": "2023-04-06T20:33:38.292475",
                        "division": 3,
                        "email": "Anne.Bergan@example.com",
                        "first_name": "Anne",
                        "full_name": "(no name) (no name)",
                        "id": 4,
                        "last_name": "Bergan",
                        "oidc_id": "00000000-0000-1111-a111-000000000004",
                        "role": "COR",
                        "updated": null
                      },
                      {
                        "date_joined": "2023-04-06T20:33:38.292475",
                        "division": 3,
                        "email": "tdonaworth+dev@flexion.us",
                        "first_name": "Tim",
                        "full_name": "(no name) (no name)",
                        "id": 5,
                        "last_name": "Donaworth",
                        "oidc_id": "e5711101-bc3e-41e5-a6a2-051874b307ca",
                        "role": "Tech Lead",
                        "updated": null
                      }
                    ]
  /api/v1/users/{user_id}:
    get:
      description: Get User by Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: user_id
          description: User Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              examples:
                '0':
                  $ref: '#/components/examples/User'
  /auth/login/:
    post:
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      description: API Authentication
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                provider:
                  type: string
            examples:
              '0':
                value: >-
                  {"code":"fd6a4ef9-686b-4dca-84a9-f2e9c8cb44a7", "provider":"logingov"}
      responses:
        '200':
          description: OK
        '204':
          description: Created
  /api/v1/research-projects/:
    get:
      description: Get ResearchProjects
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: fiscal_year
          in: query
          schema:
            type: string
          example: '2023'
        - name: portfolio_id
          in: query
          schema:
            type: string
          example: '1'
        - name: search
          in: query
          schema:
            type: string
          example: father
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResearchProjects'
              examples:
                '0':
                  $ref: '#/components/examples/ResearchProjects'
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
    post:
      summary: Create a new Research Project
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResearchProjectRequest'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/research-projects/{id}:
    get:
      description: Get Research Projects by id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResearchProject'
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
  /api/v1/research-project-funding-summary/:
    get:
      description: ''
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: portfolioId
          in: query
          schema:
            type: integer
          example: 5
        - name: fiscalYear
          in: query
          schema:
            type: integer
          example: 2023
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResearchProjectFundingSummary'
              example:
                total_funding: 1000000.01
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  portfolio_id:
                    type: array
                    items:
                      type: string
                      example: Must be greater than or equal to 1.
                  fiscal_year:
                    type: array
                    items:
                      type: string
                      example: Must be greater than or equal to 1900.
  /api/v1/procurement-shops/:
    get:
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      description: Get all Procurement Shops
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  abbr:
                    type: string
                  fee:
                    type: number
              examples:
                '0':
                  value: |
                    [
                      {
                        "id": 0,
                        "name": "Product Service Center",
                        "abbr": "PSC",
                        "fee": 0
                      },
                      {
                        "id": 1,
                        "name": "Government Contracting Services",
                        "abbr": "GCS",
                        "fee": 0
                      },
                      {
                        "id": 2,
                        "name": "National Institute of Health",
                        "abbr": "NIH",
                        "fee": 0.5
                      },
                      {
                        "id": 3,
                        "name": "Interior Business Center",
                        "abbr": "IBC",
                        "fee": 4.8
                      }
                    ]
  /api/v1/procurement-shops/{id}:
    get:
      description: Get Procurement Shop by id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  abbr:
                    type: string
                  fee:
                    type: number
              examples:
                '0':
                  value: |
                    {
                      "id": 0,
                      "name": "Product Service Center",
                      "abbr": "PSC",
                      "fee": 0
                    }
                '1':
                  value: |
                    {
                      "id": 1,
                      "name": "Government Contracting Services",
                      "abbr": "GCS",
                      "fee": 0
                    }
                '2':
                  value: |
                    {
                      "id": 2,
                      "name": "National Institute of Health",
                      "abbr": "NIH",
                      "fee": 0.5
                    }
                '3':
                  value: |
                    {
                      "id": 3,
                      "name": "Interior Business Center",
                      "abbr": "IBC",
                      "fee": 4.8
                    }
  /api/v1/budget-line-items/:
    get:
      description: Get Budget Line Items
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: can_id
          in: query
          schema:
            type: integer
          example: 1
        - name: agreement_id
          in: query
          schema:
            type: integer
          example: 1
        - name: status
          in: query
          schema:
            type: string
          example: DRAFT
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BudgetLineItems'
              examples:
                '0':
                  $ref: '#/components/examples/BudgetLineItems'
    post:
      summary: Create a new Budget Line Item
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BudgetLineItemRequest'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error
  /api/v1/budget-line-items/{id}:
    get:
      description: Get Budget Line Items by id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BudgetLineItem'
    put:
      summary: Update a new Budget Line Item (Over-write)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BudgetLineItemRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    patch:
      summary: Update a Budget Line Item (Merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BudgetLineItemRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    delete:
      summary: Delete a Budget Line Item
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/notifications/:
    get:
      description: Get Notifications
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: user_id
          in: query
          schema:
            type: integer
          example: 1
        - name: oidc_id
          in: query
          schema:
            type: string
          example: 6dd69df5-b6ab-4f27-890a-e64dd1d7f1e6
        - name: is_read
          in: query
          schema:
            type: boolean
          example: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notifications'
              examples:
                '0':
                  $ref: '#/components/examples/Notifications'
  /api/v1/notifications/{id}:
    get:
      description: Get Notifications By Id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
    put:
      summary: Update a Notification (Over-write)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    patch:
      summary: Update a Notification (Merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/services-components/:
    get:
      description: Get Services Components
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: contract_agreement_id
          in: query
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServicesComponents'
    post:
      summary: Create a new Service Component
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServicesComponentRequestPost'
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '500':
          description: Internal Server Error
  /api/v1/services-components/{id}:
    get:
      description: Get Services Component by id
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServicesComponent'
    put:
      summary: Update a Services Component (Over-write)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServicesComponentRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    patch:
      summary: Update a Services Component (Merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServicesComponentRequest'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
    delete:
      summary: Delete a Service Component
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-steps/:
    get:
      description: Get list of Procurement Steps
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - name: agreement_id
          in: query
          schema:
            type: integer
          example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProcurementSteps'
  /api/v1/procurement-acquisition-plannings/{id}:
    get:
      description: Get an Acquisition Planning step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcquisitionPlanning'
    patch:
      summary: Update Get an Acquisition Planning (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcquisitionPlanning'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-pre-solicitations/{id}:
    get:
      description: Get a Pre-Solicitation step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreSolicitation'
    patch:
      summary: Update Get an Acquisition Planning (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreSolicitation'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-solicitations/{id}:
    get:
      description: Get a Pre-Solicitation step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Solicitation'
    patch:
      summary: Update a Pre-Solicitation step (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Solicitation'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-evaluations/{id}:
    get:
      description: Get an Evaluation step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evaluation'
    patch:
      summary: Update an Evaluation step (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Evaluation'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-pre-awards/{id}:
    get:
      description: Get a Pre-Award step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PreAward'
    patch:
      summary: Update a Pre-Award step (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreAward'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/procurement-awards/{id}:
    get:
      description: Get an Award step by ID
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Award'
    patch:
      summary: Update an Award step (merge)
      parameters:
        - $ref: '#/components/parameters/simulatedError'
        - in: path
          name: id
          description: Id
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Award'
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error
  /api/v1/change-requests/:
    description: ChangeRequests collection endpoint
    get:
      description: Get a list of change requests with pagination
      parameters:
        - name: offset
          in: query
          description: The number of items to skip before starting to collect the result set
          schema:
            type: integer
            format: int32
            minimum: 0
            default: 0
        - name: limit
          in: query
          description: The numbers of items to return
          schema:
            type: integer
            format: int32
            minimum: 1
            default: 10
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ChangeRequest'
          '400':
            description: Bad Request
          '401':
            description: Unauthorized
          '500':
            description: Internal Server Error

  /api/v1/change-request-reviews/:
    description: command object endpoint to approve or reject a change request
    post:
      parameters:
        - $ref: '#/components/parameters/simulatedError'
      description: approve or reject a change request
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                change_request_id:
                  type: integer
                action:
                  type: string
                  description: 'APROVE or REJECT'
            examples:
              '0':
                value: >-
                  {"change_request_id": 123, "action": "APPROVE"}
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error

components:
  parameters:
    created_by:
      description: The user id of the user who created the object
      name: created_by
      in: query
      schema:
        type: integer
    updated_by:
      description: The user id of the user who last updated the object
      name: updated_by
      in: query
      schema:
        type: integer
    created_on:
      description: The timestamp of when the object was created
      name: created_on
      in: query
      schema:
        type: string
        format: date-time
    updated_on:
      description: The timestamp of when the object was last updated
      name: updated_on
      in: query
      schema:
        type: string
        format: date-time
    created_by_user:
      description: A minimal representation of the user who created the object
      name: created_by_user
      in: query
      schema:
        $ref: '#/components/schemas/SafeUser'
    updated_by_user:
      description: A minimal representation of the user who last updated the object
      name: updated_by_user
      in: query
      schema:
        $ref: '#/components/schemas/SafeUser'
    simulatedError:
      name: simulatedError
      in: query
      schema:
        type: integer
      example: ''
      description: >-
        Simulate an error response, set the value to either `true` to get a 500
        status code, or to a specific status code number (e.g.: `400`).
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    CAN:
      description: Common Accounting Number (CAN) Object
      type: object
      properties:
        appropriation_term:
          type: integer
        authorizer_id:
          type: integer
        arrangement_type_id:
          type: integer
        number:
          type: string
        purpose:
          type: string
        managing_portfolio_id:
          type: integer
        nickname:
          type: string
        appropriation_date: {}
        description:
          type: string
        id:
          type: integer
        expiration_date:
          type: string
        managing_project_id: {}
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    Portfolio:
      description: Portfolio Object
    User:
      description: OPRE User Object
      type: object
      properties:
        division:
          type: integer
        oidc_id:
          type: string
        full_name:
          type: string
        role:
          type: string
        last_name:
          type: string
        id:
          type: integer
        first_name:
          type: string
        email:
          type: string
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    SafeUser:
      description: A minimal OPRE User Object
      type: object
      properties:
        id:
          type: integer
        full_name:
          type: string
    ResearchProjectFundingSummary:
      description: Research Project funding data for a Portfolio
      type: object
      properties:
        total_funding:
          type: number
    TeamLeader:
      type: object
      properties:
        division:
          type: integer
        email:
          type: string
        first_name:
          type: string
        full_name:
          type: string
        id:
          type: integer
        last_name:
          type: string
        oidc_id:
          type: string
        role:
          type: string
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    ResearchProject:
      type: object
      properties:
        id:
          type: integer
          example: 1
        description:
          type: string
        methodologies:
          type: array
          items:
            type: string
            example:
              - SURVEY
              - FIELD_RESEARCH
              - PARTICIPANT_OBSERVATION
        populations:
          type: array
          items:
            type: string
            example:
              - POPULATION_1
              - POPULATION_2
        team_leaders:
          type: array
          items:
            type: object
            example: [ {
              "created_by": null,
              "created_on": "2023-04-17T14:43:15.216759",
              "date_joined": "2023-04-17T14:43:15.216759",
              "division": 1,
              "email": "chris.fortunato@example.com",
              "first_name": "Chris",
              "full_name": "Chris Fortunato",
              "id": 1,
              "last_name": "Fortunato",
              "oidc_id": "00000000-0000-1111-a111-000000000001",
              "updated": null,
              "updated_on": "2023-04-17T14:43:15.216759",
              } ]
        origination_date:
          type: string
          example: '2022-01-01'
        short_title:
          type: string
        title:
          type: string
          example: African American Child and Family Research Center
        url:
          type: string
          example: >-
            https://www.acf.hhs.gov/opre/project/african-american-child-and-family-research-center
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    ResearchProjects:
      description: OPS List of Research Projects
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/ResearchProject'
    AGREEMENTS:
      description: All Agreements
      type: array
      items:
        anyOf:
          - $ref: "#/components/schemas/Agreement"

    Agreement:
      type: object
      properties:
        id:
          type: integer
          example: 2
        name:
          type: string
          example: 'Contract #2: African American Child and Family Research Center'
        agreement_type:
          type: string
          example: CONTRACT
        description:
          type: string
          example: Test Agreement Description
        product_service_code_id:
          type: integer
          example: 1
        agreement_reason:
          type: string
          example: NEW_REQ
        incumbent:
          type: string
          example: Previous Vendor
        procurement_shop_id:
          type: integer
          example: 1
        notes:
          type: string
          example: Test Notes
        team_members:
          type: array
          items:
            type: object
            example: [
              { 'id': 1, 'full_name': 'Chris Fortunato', 'email': 'chris.fortunato@example.com' },
              { 'id': 2, 'full_name': 'Amy Madigan', 'email': 'Amy.Madigan@example.com' },
              { 'id': 3, 'full_name': 'Ivelisse Martinez-Beck', 'email': 'Ivelisse.Martinez-Beck@example.com' },
              ]
        project_id:
          type: integer
          example: 1
        project_officer_id:
          type: integer
          example: 1
        procurement_tracker_workflow_id:
          type: integer
          example: 1
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
      required:
        - name
        - agreement_type
    Agreements:
      description: OPS List of Agreements
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/Agreement'
    AgreementHistory:
      description: List of Agreement History records
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/AgreementHistoryItem'
    AgreementHistoryItem:
      type: object
      properties:
        id:
          type: integer
          example: 2
        class_name:
          type: string
          example: ContractAgreement
        row_key:
          type: string
          example: '21'
        event_details:
          description: JSON copy of the relevant object after editing or some JSON message
          type: object
        changes:
          description: JSON for the changeset
          type: object
        log_items:
          type: array
          items:
            type: object
            properties:
              scope:
                type: string
              event_type:
                type: string
              event_class_name:
                type: string
              target_class_name:
                type: string
              target_display_name:
                type: string
              property_key:
                type: string
              change:
                type: object
                properties:
                  new:
                    type: string
                  old:
                    type: string
                  added:
                    type: object
                    properties:
                      id:
                        type: integer
                      display_name:
                        type: string
                  deleted:
                    type: object
                    properties:
                      id:
                        type: integer
                      display_name:
                        type: string
              created_by_user_full_name:
                type: string
              created_on:
                type: string
                format: date-time

        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'

    OpsDbHistoryItem:
      type: object
      properties:
        id:
          type: integer
          example: 2
        class_name:
          type: string
          example: ContractAgreement
        row_key:
          type: string
          example: '21'
        event_details:
          description: JSON copy of the relevant object after editing or some JSON message
          type: object
        changes:
          description: JSON for the changeset
          type: object
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    BudgetLineItems:
      description: OPS List of Budget Line Items
      type: array
      items:
        anyOf:
          - $ref: "#/components/schemas/BudgetLineItemChangeRequest"

    BudgetLineItem:
      type: object
      properties:
        id:
          type: integer
          example: 1
        agreement_id:
          type: integer
          example: 1
        amount:
          type: number
          example: 1000000
        can_id:
          type: integer
          example: 1
        comments:
          type: string
        date_needed:
          type: string
          example: '2023-05-06'
        line_description:
          type: string
        proc_shop_fee_percentage:
          type: number
          example: 100.2
        status:
          type: string
          example: PLANNED
        portfolio_id:
          type: integer
          example: 1
        fiscal_year:
          type: integer
          example: 1
        team_members:
          type: array
          items:
            type: object
            example: [
              { 'id': 1, 'full_name': 'Chris Fortunato', 'email': 'chris.fortunato@example.com' },
              { 'id': 2, 'full_name': 'Amy Madigan', 'email': 'Amy.Madigan@example.com' },
              { 'id': 3, 'full_name': 'Ivelisse Martinez-Beck', 'email': 'Ivelisse.Martinez-Beck@example.com' },
              ]
        change_requests_in_review:
          type: array
          items:
            anyOf:
              - $ref: "#/components/schemas/BudgetLineItemChangeRequest"
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    BudgetLineItemRequest:
      type: object
      properties:
        agreement_id:
          type: integer
          example: 1
        amount:
          type: number
          example: 1000000
        can_id:
          type: integer
          example: 1
        comments:
          type: string
        date_needed:
          type: string
          example: '2023-05-06'
        line_description:
          type: string
        proc_shop_fee_percentage:
          type: number
          example: 100.2
        status:
          type: string
          example: PLANNED
      required:
        - line_description
        - agreement_id
        - can_id
        - amount
        - status
        - date_needed

    ChangeRequest:
      type: object
      properties:
        id:
          type: integer
          example: 1
        type:
          type: string
          example: 'budget_line_item_change_request'
        status:
          type: string
          example: 'IN_REVIEW'
        requested_change_data:
          description: JSON for the request changes
          type: object
        requested_change_diff:
          description: JSON for the request changes with new and old values at request time
          type: object
        created_by:
          $ref: '#/components/parameters/created_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        created_on:
          $ref: '#/components/parameters/created_on'

    BudgetLineItemChangeRequest:
      type: object
      properties:
        id:
          type: integer
          example: 1
        type:
          type: string
          example: 'budget_line_item_change_request'
        budget_line_item_id:
          type: integer
          example: 1
        has_budget_change:
          type: boolean
          example: True
        has_status_change:
          type: boolean
          example: False
        requested_change_data:
          description: JSON for the requested updates
          type: object
        requested_change_diff:
          description: JSON for the requested changes with new and old values at request time
          type: object
        created_by:
          $ref: '#/components/parameters/created_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        created_on:
          $ref: '#/components/parameters/created_on'

    ResearchProjectRequest:
      type: object
      properties:
        title:
          type: string
          example: 'Research Project #1'
        short_title:
          type: string
          example: RP#1
        description:
          type: string
          example: 'Description #1'
        url:
          type: string
          example: https://example.com
        origination_date:
          type: string
          example: '2023-05-06'
        methodologies:
          type: array
          items:
            type: string
            example:
              - SURVEY
              - FIELD_RESEARCH
              - PARTICIPANT_OBSERVATION
        populations:
          type: array
          items:
            type: string
            example:
              - POPULATION_1
              - POPULATION_2
        team_leaders:
          type: array
          items:
            type: object
            example: [ { 'id': 1 }, { 'id': 2 }, { 'id': 3 } ]

      required:
        - title
    Notifications:
      description: OPS List of Notifications
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/Notification'
    Notification:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: 'Notification #1'
        is_read:
          type: boolean
          example: true
        message:
          type: string
          example: 'Message #1'
        expires:
          type: string
          example: '2023-04-06'
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    NotificationRequest:
      type: object
      properties:
        is_read:
          type: boolean
          example: true
        title:
          type: string
          example: 'Notification #1'
        message:
          type: string
          example: 'Message #1'
        recipient_id:
          type: integer
          example: 1
    ServicesComponents:
      description: OPS List of Services Components
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/ServicesComponent'
    ServicesComponent:
      type: object
      properties:
        id:
          type: integer
          example: 1
        contract_agreement_id:
          type: integer
          example: 1
        number:
          type: integer
          example: 1
        optional:
          type: boolean
          example: false
        description:
          type: string
        display_title:
          type: string
        display_name:
          type: string
        clin_id:
          type: integer
          example: 1
        period_start:
          type: string
          example: '2023-05-06'
        period_end:
          type: string
          example: '2023-06-30'
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    ServicesComponentRequest:
      type: object
      properties:
        contract_agreement_id:
          type: integer
          example: 1
        number:
          type: integer
          example: 1
        optional:
          type: boolean
          example: false
        description:
          type: string
        display_title:
          type: string
        display_name:
          type: string
        clin_id:
          type: integer
          example: 1
        period_start:
          type: string
          example: '2023-05-06'
        period_end:
          type: string
          example: '2023-06-30'
    ServicesComponentRequestPost:
      allOf:
        - $ref: '#/components/schemas/ServicesComponentRequest'
        - type: object
          required:
            - contract_agreement_id
            - number
            - optional
    ProcurementSteps:
      description: OPS List of Procurement Steps
      type: array
      items:
        anyOf:
          - $ref: '#/components/schemas/ProcurementStep'
          - $ref: '#/components/schemas/AcquisitionPlanning'
          - $ref: '#/components/schemas/PreSolicitation'
          - $ref: '#/components/schemas/Solicitation'
          - $ref: '#/components/schemas/Evaluation'
          - $ref: '#/components/schemas/PreAward'
          - $ref: '#/components/schemas/Award'
    ProcurementStep:
      type: object
      properties:
        id:
          type: integer
          example: 1
          readOnly: true
        type:
          type: string
          example: procurement_acquisition_planning
        contract_agreement_id:
          type: integer
          example: 1
        workflow_step_id:
          type: integer
          example: 1
        display_name:
          type: string
        created_on:
          $ref: '#/components/parameters/created_on'
        updated_on:
          $ref: '#/components/parameters/updated_on'
        created_by:
          $ref: '#/components/parameters/created_by'
        updated_by:
          $ref: '#/components/parameters/updated_by'
        created_by_user:
          $ref: '#/components/parameters/created_by_user'
        updated_by_user:
          $ref: '#/components/parameters/updated_by_user'
    Attestation:
      type: object
      properties:
        is_complete:
          type: boolean
          example: false
        actual_date:
          type: string
          example: '2023-05-06'
        completed_by:
          type: string
        notes:
          type: string
    TargetDate:
      type: object
      properties:
        target_date:
          type: string
          example: '2023-05-06'
    AcquisitionPlanning:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
    PreSolicitation:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
        - $ref: '#/components/schemas/TargetDate'
    Solicitation:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
        - $ref: '#/components/schemas/TargetDate'
    Evaluation:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
        - $ref: '#/components/schemas/TargetDate'
    PreAward:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
        - $ref: '#/components/schemas/TargetDate'
    Award:
      allOf:
        - $ref: '#/components/schemas/ProcurementStep'
        - $ref: '#/components/schemas/Attestation'
  examples:
    CAN:
      value:
        - appropriation_date: '2023-09-01T00:00:00.000000Z'
        - appropriation_term: 1
        - arrangement_type_id: 2
        - authorizer_id: 23
        - description: Healthy Marriages Responsible Fatherhood - OFA
        - expiration_date: '2023-09-01T00:00:00.000000Z'
        - id: 10
        - managing_portfolio_id: 6
        - managing_project_id: null
        - nickname: HMRF-OFA
        - number: G99XXX3
        - purpose: ''
    Portfolio:
      value: |
        {
          "cans": [
              {
                  "appropriation_date": "2023-09-01T00:00:00.000000Z",
                  "appropriation_term": 1,
                  "arrangement_type_id": 3,
                  "authorizer_id": 26,
                  "description": "Incoming Interagency Agreements",
                  "expiration_date": "2023-09-01T00:00:00.000000Z",
                  "id": 2,
                  "managing_portfolio_id": 1,
                  "managing_project_id": null,
                  "nickname": "IAA-Incoming",
                  "number": "G99IA14",
                  "purpose": "",
                  "created_on": "2023-04-06T20:33:38.292475",
                  "updated_on": "2023-04-06T20:33:38.292475",
                  "created_by": 1,
                  "updated_by": 1
              },
              {
                  "appropriation_date": "2023-09-01T00:00:00.000000Z",
                  "appropriation_term": 1,
                  "arrangement_type_id": 4,
                  "authorizer_id": 26,
                  "description": "Child Development Research Fellowship Grant Program",
                  "expiration_date": "2023-09-01T00:00:00.000000Z",
                  "id": 4,
                  "managing_portfolio_id": 1,
                  "managing_project_id": 1,
                  "nickname": "ASPE SRCD-IDDA",
                  "number": "G990136",
                  "purpose": "",
                  "created_on": "2023-04-06T20:33:38.292475",
                  "updated_on": "2023-04-06T20:33:38.292475",
                  "created_by": 1,
                  "updated_by": 1
              }
          ],
          "description": "The promotion of childrens safety, ... to the attention of child welfare.",
          "division": {
              "abbreviation": "DFCD",
              "id": 1,
              "name": "Division of Child and Family Development"
          },
          "division_id": 1,
          "id": 1,
          "name": "Child Welfare Research",
          "status": "Active",
          "status_id": 1,
          "team_leaders": [
              {
                  "date_joined": "2023-04-06T20:33:38.292475",
                  "division": 1,
                  "email": "emily.ball@example.com",
                  "first_name": "Emily",
                  "full_name": "(no name) (no name)",
                  "id": 1,
                  "last_name": "Ball",
                  "oidc_id": "00000000-0000-1111-a111-000000000001",
                  "role": "COR",
                  "updated": null
              }
          ],
          "urls": [
              {
                  "id": 1,
                  "portfolio_id": 1,
                  "url": "https://www.acf.hhs.gov/opre/topic/overview/abuse-neglect-adoption-foster-care"
              }
          ],
          "created_on": "2023-04-06T20:33:38.292475",
          "updated_on": "2023-04-06T20:33:38.292475",
          "created_by": 1,
          "updated_by": 1
        }
    User:
      value: |
        {
          "division": 3,
          "email": "user@email.com",
          "first_name": "Jon",
          "full_name": "Jon Doe",
          "id": 5,
          "last_name": "Doe",
          "oidc_id": "00000000-aaaa-bbbb-0000-000000000001",
          "role": "Administrator",
          "created_on": "2023-04-06T20:33:38.292475",
          "updated_on": "2023-04-06T20:33:38.292475",
          "created_by": 1,
          "updated_by": 1
        }
    ResearchProjects:
      value: |
        [
          {
            "created_on": "2023-04-06T20:33:38.292475",
            "updated_on": "2023-04-06T20:33:38.292475",
            "created_by": 1,
            "updated_by": 1
            "description": "        The National African American Child and Family Research Center, supported by a five-year OPRE        grant (2021 — 2026), will provide national leadership and excellence by investigating the assets, needs,        and experiences of the diverse population of African American families and children served (or potentially        served) by ACF programs, as well as promising approaches to address economic and social inequities and,        ultimately, promote social and economic well-being.  The primary focus of this Center will be on childcare        assistance, TANF, and Head Start and Early Head Start programs and the populations they serve. The work of        the Center will draw on interdisciplinary approaches to accomplish the three goals listed below.        \n\n1. Advance Research        The Center will plan, initiate, and maintain a community-engaged, focused, and high-caliber research program.        The Center’s program of research will build on the existing literature related to African American children        and families and should be directly relevant to the needs and interests of ACF areas of programmatic concern.        \n\n2. Build Research Capacity        The Center will build research capacity and infrastructure to conduct research relevant to ACF program and        policy goals that is culturally rigorous and informed by an understanding of current and historical        circumstances that shape the experiences of African Americans. In addition, the Center will contribute to the        development and expansion of the pool of researchers reflective of the communities being studied by the Center.        \n\n3. Communicate Research        The Center will develop and implement a dissemination strategy that broadly and efficiently communicates        findings from research conducted within and outside of the Center and increases the use of research, data, and        relevant resources for a wide audience including researchers, federal and state policymakers, ACF grantees,        program administrators, and communities participating in the research.        \n\nThe Center is led by the Morehouse School of Medicine.        \n\nThe OPRE point of contact is Megan Reid.        ",
            "id": 1,
            "methodologies": [
                "SURVEY",
                "FIELD_RESEARCH",
                "PARTICIPANT_OBSERVATION",
                "ETHNOGRAPHY",
                "EXPERIMENT",
                "SECONDARY_DATA_ANALYSIS",
                "CASE_STUDY"
            ],
            "origination_date": "2022-01-01",
            "populations": [
                "POPULATION_1"
            ],
            "short_title": "",
            "team_leaders": [
                {
                    "created_by": null,
                    "created_on": "2023-04-17T14:43:15.216759",
                    "date_joined": "2023-04-17T14:43:15.216759",
                    "division": 1,
                    "email": "chris.fortunato@example.com",
                    "first_name": "Chris",
                    "full_name": "Chris Fortunato",
                    "id": 1,
                    "last_name": "Fortunato",
                    "oidc_id": "00000000-0000-1111-a111-000000000001",
                    "updated": null,
                    "updated_on": "2023-04-17T14:43:15.216759"
                }
            ],
            "title": "African American Child and Family Research Center",
            "url": "https://www.acf.hhs.gov/opre/project/african-american-child-and-family-research-center"
          }
        ]
    AGREEMENTS:
      value: |
        [
           {
               "id": 1,
               "created_on": "2023-04-06T20:33:38.292475",
               "updated_on": "2023-04-06T20:33:38.292475",
               "created_by": 1,
               "updated_by": 1
               "name": "Using Innovative Data to Explore Racial and Ethnic Disparities in Human Services",
               "project_id": 1,
               "description":
                   "This will be a contract to continue planned analyses to explore racial and ethnic disparities in Human Services.",
               "agreement_type": "CONTRACT",
               "project_officer": "Ivelisse Martinez-Beck",
               "period_of_performance_start": "2021-01-01",
               "period_of_performance_end": "2021-12-31",
               procurement_shop: {
                   id: 2,
                   name: "Government Contracting Services",
                   fee: 0,
               },
               budget_line_items: [
                   {
                       id: 123456,
                       line_description: "LI 1",
                       comments: "",
                       can_id: 5,
                       can_number: "G994426",
                       agreement_id: 1,
                       amount: 1000000.0,
                       status: "EXECUTING",
                       date_needed: "2111-1-11",
                       proc_shop_fee_percentage: 0,
                       created_by: "Carolyn Hsu",
                       created_on: "2023-4-5",
                       updated_on: "2023-4-15",
                   },
                   {
                       id: 123457,
                       line_description: "LI 2",
                       comments: "",
                       can_id: 5,
                       can_number: "G994426",
                       agreement_id: 1,
                       amount: 1000000.0,
                       status: "OBLIGATED",
                       date_needed: "2222-2-22",
                       proc_shop_fee_percentage: 0,
                       created_by: "Carolyn Hsu",
                       created_on: "2023-4-1",
                       updated_on: "2023-4-15",
                   },
                   {
                       id: 123458,
                       line_description: "LI 3",
                       comments: "",
                       can_id: 5,
                       can_number: "G994426",
                       agreement_id: 1,
                       amount: 1000000.0,
                       status: "PLANNED",
                       date_needed: "2333-3-13",
                       proc_shop_fee_percentage: 0,
                       created_by: "Carolyn Hsu",
                       created_on: "2023-3-11",
                       updated_on: "2023-4-15",
                   },
                 ],
           },

         ];
    Agreements:
      value: |
        [{
          "agreement_type": "CONTRACT",
          "created_on": "2023-04-06T20:33:38.292475",
          "updated_on": "2023-04-06T20:33:38.292475",
          "created_by": 1,
          "updated_by": 1
          "id": 2,
          "name": "Contract #2: African American Child and Family Research Center",
          "project_id": 1,
           cans: [],
           budget_line_items: [
            {
                line_description: "LI 1",
                comments: "",
                can_id: 5,
                agreement_id: 1,
                amount: 1000000.0,
                status: "EXECUTING",
                date_needed: "2111-1-11",
                proc_shop_fee_percentage: 0.5,
            },
            {
                line_description: "LI 2",
                comments: "",
                can_id: 5,
                agreement_id: 1,
                amount: 1000000.0,
                status: "OBLIGATED",
                date_needed: "2222-2-22",
                proc_shop_fee_percentage: 0.5,
            },
            {
                line_description: "LI 3",
                comments: "",
                can_id: 5,
                agreement_id: 1,
                amount: 1000000.0,
                status: "PLANNED",
                date_needed: "2333-3-13",
                proc_shop_fee_percentage: 0.5,
            },
        ],
        }]
    Agreement:
      value: |
        {
          "agreement_type": "CONTRACT",
          "created_on": "2023-04-06T20:33:38.292475",
          "updated_on": "2023-04-06T20:33:38.292475",
          "created_by": 1,
          "updated_by": 1
          "id": 2,
          "name": "Contract #2: African American Child and Family Research Center",
          "project_id": 1,
          cans: [],
          budget_line_items: [
            {
                line_description: "LI 1",
                comments: "",
                can_id: 5,
                agreement_id: 2,
                amount: 1000000.0,
                status: "EXECUTING",
                date_needed: "2111-1-11",
                proc_shop_fee_percentage: 0.5,
            },
            {
                line_description: "LI 2",
                comments: "",
                can_id: 5,
                agreement_id: 2,
                amount: 1000000.0,
                status: "OBLIGATED",
                date_needed: "2222-2-22",
                proc_shop_fee_percentage: 0.5,
            },
            {
                line_description: "LI 3",
                comments: "",
                can_id: 5,
                agreement_id: 2,
                amount: 1000000.0,
                status: "PLANNED",
                date_needed: "2333-3-13",
                proc_shop_fee_percentage: 0.5,
            },
        ],
        }
    BudgetLineItems:
      value: |
        [
          {
              "agreement_id": 1,
              "amount": 1000000.0,
              "can_id": 5,
              "comments": "",
              "date_needed": "2023-05-06",
              "id": 1,
              "line_description": "LI 1",
              "proc_shop_fee_percentage": null,
              "status": "PLANNED",
              "created_on": "2023-04-06T20:33:38.292475",
              "updated_on": "2023-04-06T20:33:38.292475",
              "created_by": 1,
              "updated_by": 1
          },
          {
              "agreement_id": 1,
              "amount": 1000000.0,
              "can_id": 5,
              "comments": "",
              "date_needed": "2023-05-06",
              "id": 2,
              "line_description": "LI 2",
              "proc_shop_fee_percentage": null,
              "status": "PLANNED",
              "created_on": "2023-04-06T20:33:38.292475",
              "updated_on": "2023-04-06T20:33:38.292475",
              "created_by": 1,
              "updated_by": 1
          },
          {
              "agreement_id": 2,
              "amount": 1000000.0,
              "can_id": 8,
              "comments": "",
              "date_needed": "2023-05-06",
              "id": 3,
              "line_description": "Line Item 1",
              "proc_shop_fee_percentage": null,
              "status": "PLANNED",
              "created_on": "2023-04-06T20:33:38.292475",
              "updated_on": "2023-04-06T20:33:38.292475",
              "created_by": 1,
              "updated_by": 1
          }
        ]
    Notifications:
      value: |
        [
        ]
security:
  - bearerAuth: []
