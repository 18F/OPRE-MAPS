name: Run Full Stack
description: Runs the full stack from the docker-compose.yml
inputs:
  JWT_KEY:
    description: Key used for generating the JWTs in the backend-api. These should be dev/testing keys only.
    required: false
    default: ''
runs:
  using: composite
  steps:
    - name: Start Stack
      shell: bash
      run: |
        set -x
        export JWT_PRIVATE_KEY=${{ inputs.JWT_KEY }}
        docker compose -f docker-compose.e2e.yml down -v
        docker compose -f docker-compose.e2e.yml up --build -d
